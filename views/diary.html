<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>diary</title>
</head>
<body>
    <div class="dropdown">
        <button class="dropbtn">=</button>
        <div class="dropdown-content">
          <a id="homeBtn">홈</a>
          <a id="calendarBtn">캘린더 보기</a>
          <a id="folderBtn">폴더별 보기</a>
          <a id="diaryBtn">일기 쓰기</a>
          <a id="optionBtn">설정</a>
          <a id="logoutBtn">로그아웃</a>
        </div>
      </div>

      <div class="dropdown">
        <button class="dropbtn">카테고리</button>
        <div class="dropdown-content">
          <a id="daily">일상</a>
          <a id="hobby">취미</a>
          <a id="travel">여행</a>
          <a id="babyBtn">육아</a>
          <a id="etcBtn">기타</a>

        </div>
      </div>

      <form action="/board/write" method="post">
        <table border="1">
                <td>내용</td>
                <td><textarea name="content" id="content" cols="30" rows="10" required></textarea></td>
            </tr>
            <tr>
                <td colspan="2">
                    <button type="submitBtn">글쓰기</button>
                </td>
            </tr>
        </table>
    </form>
    
    
    <script>
      document.getElementById('submitBtn').addEventListener('click', function(){
      })
      
      
      // AJAX START
      const xhr = new XMLHttpRequest();
      
      // params : 요청 방식, 요청 경로, 동기/비동기 여부(서버에서 데이터 받을 때 까지 대기 여부, true일 경우 비동기)
      xhr.open("POST", '/board', true);
      
      // 서버에 데이터를 보내는 부분
      //Send the proper header information along with the request
      xhr.setRequestHeader("Content-Type", "application/json"); // 서버에 보낼 데이터 타입 정의
      // 보낼 데이터
      const sendData = {
        content
       };
      
      xhr.send(JSON.stringify(sendData)); // 객체를 json타입으로 변환 후, 서버에 데이터 전송
      xhr.responseType = "json";
      // 서버에서 데이터를 받는 부분               //fetch 확인해서 다음에 사용하셈
      xhr.onreadystatechange = function() { // Call a function when the state changes.
          if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
            // Request finished. Do processing here.
            res = xhr.response;
            if (res.result) { 
              location.href = '/main'
            } else {
               alert("글 작성 실패.");
            }
          }
      }
      // AJAX END
      
      
      </script>


    
<style>
    .dropbtn {
  background-color: #ea2129;
  color: white;
  padding: 16px;
  font-size: 16px;
  border: none;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown-content a:hover {background-color: #ddd;}

.dropdown:hover .dropdown-content {display: block;}

.dropdown:hover .dropbtn {background-color: #3e8e41;}
</style>


</body>
</html>